<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NFC Reader ke Google Sheet</title>
</head>
<body>
  <h1>Scan Kartu NFC</h1>
  <button id="scanBtn">Scan NFC</button>
  <p id="output"></p>

  <script>
    document.getElementById("scanBtn").addEventListener("click", async () => {
      if ("NDEFReader" in window) {
        try {
          const ndef = new NDEFReader();
          await ndef.scan();
          console.log("NFC ready, tempelkan kartu...");

          ndef.onreading = async event => {
            let decoder = new TextDecoder();
            let nama = "";

            for (const record of event.message.records) {
              nama = decoder.decode(record.data);
            }

            document.getElementById("output").innerText = `Nama: ${nama}`;

            // Kirim ke Google Apps Script
            fetch("PASTE_WEBAPP_URL_DISINI", {
              method: "POST",
              body: new URLSearchParams({
                nama: nama   // harus sama persis dengan header "nama"
              })
            })
            .then(res => res.text())
            .then(txt => console.log("Response:", txt))
            .catch(err => console.error("Error:", err));
          };
        } catch (error) {
          console.error("NFC error:", error);
        }
      } else {
        alert("Browser tidak mendukung Web NFC (gunakan Chrome Android).");
      }
    });
  </script>
</body>
</html>
